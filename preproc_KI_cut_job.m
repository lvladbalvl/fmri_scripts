%-----------------------------------------------------------------------
% Job configuration created by cfg_util (rev $Rev: 4252 $)
%-----------------------------------------------------------------------
matlabbatch{1}.spm.util.dicom.data = '<UNDEFINED>';
matlabbatch{1}.spm.util.dicom.root = 'flat';
matlabbatch{1}.spm.util.dicom.outdir = '<UNDEFINED>';
matlabbatch{1}.spm.util.dicom.convopts.format = 'img';
matlabbatch{1}.spm.util.dicom.convopts.icedims = 0;
matlabbatch{2}.spm.util.dicom.data = '<UNDEFINED>';
matlabbatch{2}.spm.util.dicom.root = 'flat';
matlabbatch{2}.spm.util.dicom.outdir = '<UNDEFINED>';
matlabbatch{2}.spm.util.dicom.convopts.format = 'img';
matlabbatch{2}.spm.util.dicom.convopts.icedims = 0;
matlabbatch{3}.spm.util.dicom.data = '<UNDEFINED>';
matlabbatch{3}.spm.util.dicom.root = 'flat';
matlabbatch{3}.spm.util.dicom.outdir = '<UNDEFINED>';
matlabbatch{3}.spm.util.dicom.convopts.format = 'img';
matlabbatch{3}.spm.util.dicom.convopts.icedims = 0;
matlabbatch{4}.spm.spatial.realign.estwrite.data{1}(1) = cfg_dep;
matlabbatch{4}.spm.spatial.realign.estwrite.data{1}(1).tname = 'Session';
matlabbatch{4}.spm.spatial.realign.estwrite.data{1}(1).tgt_spec{1}(1).name = 'filter';
matlabbatch{4}.spm.spatial.realign.estwrite.data{1}(1).tgt_spec{1}(1).value = 'image';
matlabbatch{4}.spm.spatial.realign.estwrite.data{1}(1).tgt_spec{1}(2).name = 'strtype';
matlabbatch{4}.spm.spatial.realign.estwrite.data{1}(1).tgt_spec{1}(2).value = 'e';
matlabbatch{4}.spm.spatial.realign.estwrite.data{1}(1).sname = 'DICOM Import: Converted Images';
matlabbatch{4}.spm.spatial.realign.estwrite.data{1}(1).src_exbranch = substruct('.','val', '{}',{3}, '.','val', '{}',{1}, '.','val', '{}',{1});
matlabbatch{4}.spm.spatial.realign.estwrite.data{1}(1).src_output = substruct('.','files');
matlabbatch{4}.spm.spatial.realign.estwrite.eoptions.quality = 0.9;
matlabbatch{4}.spm.spatial.realign.estwrite.eoptions.sep = 4;
matlabbatch{4}.spm.spatial.realign.estwrite.eoptions.fwhm = 5;
matlabbatch{4}.spm.spatial.realign.estwrite.eoptions.rtm = 1;
matlabbatch{4}.spm.spatial.realign.estwrite.eoptions.interp = 2;
matlabbatch{4}.spm.spatial.realign.estwrite.eoptions.wrap = [0 0 0];
matlabbatch{4}.spm.spatial.realign.estwrite.eoptions.weight = '';
matlabbatch{4}.spm.spatial.realign.estwrite.roptions.which = [2 1];
matlabbatch{4}.spm.spatial.realign.estwrite.roptions.interp = 4;
matlabbatch{4}.spm.spatial.realign.estwrite.roptions.wrap = [0 0 0];
matlabbatch{4}.spm.spatial.realign.estwrite.roptions.mask = 1;
matlabbatch{4}.spm.spatial.realign.estwrite.roptions.prefix = 'r';
matlabbatch{5}.spm.tools.fieldmap.presubphasemag.subj.phase(1) = cfg_dep;
matlabbatch{5}.spm.tools.fieldmap.presubphasemag.subj.phase(1).tname = 'Phase Image';
matlabbatch{5}.spm.tools.fieldmap.presubphasemag.subj.phase(1).tgt_spec{1}(1).name = 'filter';
matlabbatch{5}.spm.tools.fieldmap.presubphasemag.subj.phase(1).tgt_spec{1}(1).value = 'image';
matlabbatch{5}.spm.tools.fieldmap.presubphasemag.subj.phase(1).tgt_spec{1}(2).name = 'strtype';
matlabbatch{5}.spm.tools.fieldmap.presubphasemag.subj.phase(1).tgt_spec{1}(2).value = 'e';
matlabbatch{5}.spm.tools.fieldmap.presubphasemag.subj.phase(1).sname = 'DICOM Import: Converted Images';
matlabbatch{5}.spm.tools.fieldmap.presubphasemag.subj.phase(1).src_exbranch = substruct('.','val', '{}',{1}, '.','val', '{}',{1}, '.','val', '{}',{1});
matlabbatch{5}.spm.tools.fieldmap.presubphasemag.subj.phase(1).src_output = substruct('.','files');
matlabbatch{5}.spm.tools.fieldmap.presubphasemag.subj.magnitude(1) = cfg_dep;
matlabbatch{5}.spm.tools.fieldmap.presubphasemag.subj.magnitude(1).tname = 'Magnitude Image';
matlabbatch{5}.spm.tools.fieldmap.presubphasemag.subj.magnitude(1).tgt_spec{1}(1).name = 'filter';
matlabbatch{5}.spm.tools.fieldmap.presubphasemag.subj.magnitude(1).tgt_spec{1}(1).value = 'image';
matlabbatch{5}.spm.tools.fieldmap.presubphasemag.subj.magnitude(1).tgt_spec{1}(2).name = 'strtype';
matlabbatch{5}.spm.tools.fieldmap.presubphasemag.subj.magnitude(1).tgt_spec{1}(2).value = 'e';
matlabbatch{5}.spm.tools.fieldmap.presubphasemag.subj.magnitude(1).sname = 'DICOM Import: Converted Images';
matlabbatch{5}.spm.tools.fieldmap.presubphasemag.subj.magnitude(1).src_exbranch = substruct('.','val', '{}',{2}, '.','val', '{}',{1}, '.','val', '{}',{1});
matlabbatch{5}.spm.tools.fieldmap.presubphasemag.subj.magnitude(1).src_output = substruct('.','files');
matlabbatch{5}.spm.tools.fieldmap.presubphasemag.subj.defaults.defaultsval.et = [4.92 7.38];
matlabbatch{5}.spm.tools.fieldmap.presubphasemag.subj.defaults.defaultsval.maskbrain = 0;
matlabbatch{5}.spm.tools.fieldmap.presubphasemag.subj.defaults.defaultsval.blipdir = -1;
matlabbatch{5}.spm.tools.fieldmap.presubphasemag.subj.defaults.defaultsval.tert = 18.6;
matlabbatch{5}.spm.tools.fieldmap.presubphasemag.subj.defaults.defaultsval.epifm = 0;
matlabbatch{5}.spm.tools.fieldmap.presubphasemag.subj.defaults.defaultsval.ajm = 0;
matlabbatch{5}.spm.tools.fieldmap.presubphasemag.subj.defaults.defaultsval.uflags.method = 'Mark3D';
matlabbatch{5}.spm.tools.fieldmap.presubphasemag.subj.defaults.defaultsval.uflags.fwhm = 10;
matlabbatch{5}.spm.tools.fieldmap.presubphasemag.subj.defaults.defaultsval.uflags.pad = 0;
matlabbatch{5}.spm.tools.fieldmap.presubphasemag.subj.defaults.defaultsval.uflags.ws = 1;
matlabbatch{5}.spm.tools.fieldmap.presubphasemag.subj.defaults.defaultsval.mflags.template = {'C:\Users\Vlad\Documents\MATLAB\spm8\templates\T1.nii'};
matlabbatch{5}.spm.tools.fieldmap.presubphasemag.subj.defaults.defaultsval.mflags.fwhm = 5;
matlabbatch{5}.spm.tools.fieldmap.presubphasemag.subj.defaults.defaultsval.mflags.nerode = 2;
matlabbatch{5}.spm.tools.fieldmap.presubphasemag.subj.defaults.defaultsval.mflags.ndilate = 4;
matlabbatch{5}.spm.tools.fieldmap.presubphasemag.subj.defaults.defaultsval.mflags.thresh = 0.5;
matlabbatch{5}.spm.tools.fieldmap.presubphasemag.subj.defaults.defaultsval.mflags.reg = 0.02;
matlabbatch{5}.spm.tools.fieldmap.presubphasemag.subj.session.epi(1) = cfg_dep;
matlabbatch{5}.spm.tools.fieldmap.presubphasemag.subj.session.epi(1).tname = 'Select EPI to Unwarp';
matlabbatch{5}.spm.tools.fieldmap.presubphasemag.subj.session.epi(1).tgt_spec{1}(1).name = 'filter';
matlabbatch{5}.spm.tools.fieldmap.presubphasemag.subj.session.epi(1).tgt_spec{1}(1).value = 'image';
matlabbatch{5}.spm.tools.fieldmap.presubphasemag.subj.session.epi(1).tgt_spec{1}(2).name = 'strtype';
matlabbatch{5}.spm.tools.fieldmap.presubphasemag.subj.session.epi(1).tgt_spec{1}(2).value = 'e';
matlabbatch{5}.spm.tools.fieldmap.presubphasemag.subj.session.epi(1).sname = 'Realign: Estimate & Reslice: Mean Image';
matlabbatch{5}.spm.tools.fieldmap.presubphasemag.subj.session.epi(1).src_exbranch = substruct('.','val', '{}',{4}, '.','val', '{}',{1}, '.','val', '{}',{1}, '.','val', '{}',{1});
matlabbatch{5}.spm.tools.fieldmap.presubphasemag.subj.session.epi(1).src_output = substruct('.','rmean');
matlabbatch{5}.spm.tools.fieldmap.presubphasemag.subj.matchvdm = 1;
matlabbatch{5}.spm.tools.fieldmap.presubphasemag.subj.sessname = 'session';
matlabbatch{5}.spm.tools.fieldmap.presubphasemag.subj.writeunwarped = 0;
matlabbatch{5}.spm.tools.fieldmap.presubphasemag.subj.anat = '<UNDEFINED>';
matlabbatch{5}.spm.tools.fieldmap.presubphasemag.subj.matchanat = 0;
matlabbatch{6}.spm.tools.fieldmap.applyvdm.data.scans(1) = cfg_dep;
matlabbatch{6}.spm.tools.fieldmap.applyvdm.data.scans(1).tname = 'Images';
matlabbatch{6}.spm.tools.fieldmap.applyvdm.data.scans(1).tgt_spec{1}(1).name = 'filter';
matlabbatch{6}.spm.tools.fieldmap.applyvdm.data.scans(1).tgt_spec{1}(1).value = 'image';
matlabbatch{6}.spm.tools.fieldmap.applyvdm.data.scans(1).tgt_spec{1}(2).name = 'strtype';
matlabbatch{6}.spm.tools.fieldmap.applyvdm.data.scans(1).tgt_spec{1}(2).value = 'e';
matlabbatch{6}.spm.tools.fieldmap.applyvdm.data.scans(1).sname = 'Realign: Estimate & Reslice: Resliced Images (Sess 1)';
matlabbatch{6}.spm.tools.fieldmap.applyvdm.data.scans(1).src_exbranch = substruct('.','val', '{}',{4}, '.','val', '{}',{1}, '.','val', '{}',{1}, '.','val', '{}',{1});
matlabbatch{6}.spm.tools.fieldmap.applyvdm.data.scans(1).src_output = substruct('.','sess', '()',{1}, '.','rfiles');
matlabbatch{6}.spm.tools.fieldmap.applyvdm.data.vdmfile(1) = cfg_dep;
matlabbatch{6}.spm.tools.fieldmap.applyvdm.data.vdmfile(1).tname = 'Fieldmap (vdm* file)';
matlabbatch{6}.spm.tools.fieldmap.applyvdm.data.vdmfile(1).tgt_spec{1}(1).name = 'filter';
matlabbatch{6}.spm.tools.fieldmap.applyvdm.data.vdmfile(1).tgt_spec{1}(1).value = 'image';
matlabbatch{6}.spm.tools.fieldmap.applyvdm.data.vdmfile(1).tgt_spec{1}(2).name = 'strtype';
matlabbatch{6}.spm.tools.fieldmap.applyvdm.data.vdmfile(1).tgt_spec{1}(2).value = 'e';
matlabbatch{6}.spm.tools.fieldmap.applyvdm.data.vdmfile(1).sname = 'Presubtracted Phase and Magnitude Data: Voxel displacement map (Subj 1, Session 1)';
matlabbatch{6}.spm.tools.fieldmap.applyvdm.data.vdmfile(1).src_exbranch = substruct('.','val', '{}',{5}, '.','val', '{}',{1}, '.','val', '{}',{1}, '.','val', '{}',{1});
matlabbatch{6}.spm.tools.fieldmap.applyvdm.data.vdmfile(1).src_output = substruct('()',{1}, '.','vdmfile', '{}',{1});
matlabbatch{6}.spm.tools.fieldmap.applyvdm.roptions.pedir = 2;
matlabbatch{6}.spm.tools.fieldmap.applyvdm.roptions.which = [2 1];
matlabbatch{6}.spm.tools.fieldmap.applyvdm.roptions.rinterp = 4;
matlabbatch{6}.spm.tools.fieldmap.applyvdm.roptions.wrap = [0 0 0];
matlabbatch{6}.spm.tools.fieldmap.applyvdm.roptions.mask = 1;
matlabbatch{6}.spm.tools.fieldmap.applyvdm.roptions.prefix = 'u';
matlabbatch{7}.spm.spatial.coreg.estimate.ref(1) = cfg_dep;
matlabbatch{7}.spm.spatial.coreg.estimate.ref(1).tname = 'Reference Image';
matlabbatch{7}.spm.spatial.coreg.estimate.ref(1).tgt_spec{1}(1).name = 'filter';
matlabbatch{7}.spm.spatial.coreg.estimate.ref(1).tgt_spec{1}(1).value = 'image';
matlabbatch{7}.spm.spatial.coreg.estimate.ref(1).tgt_spec{1}(2).name = 'strtype';
matlabbatch{7}.spm.spatial.coreg.estimate.ref(1).tgt_spec{1}(2).value = 'e';
matlabbatch{7}.spm.spatial.coreg.estimate.ref(1).sname = 'Apply VDM : Mean Image';
matlabbatch{7}.spm.spatial.coreg.estimate.ref(1).src_exbranch = substruct('.','val', '{}',{6}, '.','val', '{}',{1}, '.','val', '{}',{1}, '.','val', '{}',{1});
matlabbatch{7}.spm.spatial.coreg.estimate.ref(1).src_output = substruct('.','rmean');
matlabbatch{7}.spm.spatial.coreg.estimate.source = '<UNDEFINED>';
matlabbatch{7}.spm.spatial.coreg.estimate.other = {''};
matlabbatch{7}.spm.spatial.coreg.estimate.eoptions.cost_fun = 'nmi';
matlabbatch{7}.spm.spatial.coreg.estimate.eoptions.sep = [4 2];
matlabbatch{7}.spm.spatial.coreg.estimate.eoptions.tol = [0.02 0.02 0.02 0.001 0.001 0.001 0.01 0.01 0.01 0.001 0.001 0.001];
matlabbatch{7}.spm.spatial.coreg.estimate.eoptions.fwhm = [7 7];
matlabbatch{8}.spm.util.defs.comp{1}.def = '<UNDEFINED>';
matlabbatch{8}.spm.util.defs.ofname = '';
matlabbatch{8}.spm.util.defs.fnames(1) = cfg_dep;
matlabbatch{8}.spm.util.defs.fnames(1).tname = 'Apply to';
matlabbatch{8}.spm.util.defs.fnames(1).tgt_spec{1}(1).name = 'filter';
matlabbatch{8}.spm.util.defs.fnames(1).tgt_spec{1}(1).value = 'image';
matlabbatch{8}.spm.util.defs.fnames(1).tgt_spec{1}(2).name = 'strtype';
matlabbatch{8}.spm.util.defs.fnames(1).tgt_spec{1}(2).value = 'e';
matlabbatch{8}.spm.util.defs.fnames(1).sname = 'Apply VDM : VDM corrected images (Sess 1)';
matlabbatch{8}.spm.util.defs.fnames(1).src_exbranch = substruct('.','val', '{}',{6}, '.','val', '{}',{1}, '.','val', '{}',{1}, '.','val', '{}',{1});
matlabbatch{8}.spm.util.defs.fnames(1).src_output = substruct('.','sess', '()',{1}, '.','rfiles');
matlabbatch{8}.spm.util.defs.savedir.savesrc = 1;
matlabbatch{8}.spm.util.defs.interp = 1;
matlabbatch{9}.spm.spatial.smooth.data(1) = cfg_dep;
matlabbatch{9}.spm.spatial.smooth.data(1).tname = 'Images to Smooth';
matlabbatch{9}.spm.spatial.smooth.data(1).tgt_spec{1}.name = 'filter';
matlabbatch{9}.spm.spatial.smooth.data(1).tgt_spec{1}.value = 'image';
matlabbatch{9}.spm.spatial.smooth.data(1).sname = 'Deformations: Warped images';
matlabbatch{9}.spm.spatial.smooth.data(1).src_exbranch = substruct('.','val', '{}',{8}, '.','val', '{}',{1}, '.','val', '{}',{1});
matlabbatch{9}.spm.spatial.smooth.data(1).src_output = substruct('.','warped');
matlabbatch{9}.spm.spatial.smooth.fwhm = [6 6 6];
matlabbatch{9}.spm.spatial.smooth.dtype = 0;
matlabbatch{9}.spm.spatial.smooth.im = 0;
matlabbatch{9}.spm.spatial.smooth.prefix = 's';
